<book xmlns="http://docbook.org/ns/docbook"
      xmlns:xi='http://www.w3.org/2001/XInclude'
      xmlns:xlink="http://www.w3.org/1999/xlink"
      version="5.2">
<info>
<mediaobject role="cover">
  <imageobject>
    <imagedata fileref="images/CoffeeFilter.png"/>
  </imageobject>
</mediaobject>
<title>CoffeeFilter</title>
<subtitle>An Invisible XML parser in Java</subtitle>
<author>
  <personname>Norm Tovey-Walsh</personname>
</author>
<copyright><year>2022</year><year>2023</year><holder>Norm Tovey-Walsh</holder></copyright>
<productname>coffeepot</productname>
<productnumber>@@VERSION@@</productnumber>
<bibliomisc role="coffeegrinder">@@GRINDERVERSION@@</bibliomisc>
</info>

<preface>
<title>Introduction</title>
<para>CoffeeFilter is an
<link xlink:href="https://invisiblexml.org/">Invisible XML</link> parsing
library.</para>
</preface>

<chapter>
<title>General use</title>

<para>This is just an overview, consult the 
<link xlink:href="/apidoc">JavaDoc</link> for more details.</para>

<programlistingco>
<areaspec>
<area xml:id="ex_parser" coords="10 55"/>
<area xml:id="ex_doc" coords="13 55"/>
<area xml:id="ex_tree" coords="16 55"/>
</areaspec>
<programlisting language="java">String input = "date: s?, day, -s, month, (-s, year)? .\n" +
        "-s: -\" \"+ .\n" +
        "day: digit, digit? .\n" +
        "-digit: \"0\"; \"1\"; \"2\"; \"3\"; \"4\"; \"5\"; \"6\"; \"7\"; \"8\"; \"9\".\n" +
        "month: \"January\"; \"February\"; \"March\"; \"April\";\n" +
        "       \"May\"; \"June\"; \"July\"; \"August\";\n" +
        "       \"September\"; \"October\"; \"November\"; \"December\".\n" +
        "year: ((digit, digit); -\"'\")?, digit, digit .";

InvisibleXmlParser parser
    = new InvisibleXml().getParserFromIxml(input);

InvisibleXmlDocument doc
     = parser.parse("27 Feb 2022");

String result = doc.getTree();
</programlisting>
<calloutlist>
<callout arearefs="ex_parser">
<para>Create a parser. In early versions of this API, the
<classname>InvisibleXml</classname> class had static methods. In version 0.6.0,
that was changed. It must now be instantiated and the <classname>ParserOptions</classname>
to use can be specified.
</para>
</callout>
<callout arearefs="ex_doc">
<para>Parse some input.
</para>
<para>In the case of a failed parse, the <classname>InvisibleXmlDocument</classname>
will also provide details about the failure.</para>
</callout>
<callout arearefs="ex_tree">
<para>Get the XML.
</para>
<para>Several tree models can be constructed and the parse tree can be
sent to any <link xlink:href="http://www.saxproject.org/">SAX</link>
document builder.</para>
</callout>
</calloutlist>
</programlistingco>
</chapter>

<xi:include href="changelog.xml"/>

<appendix xml:id="character-classes">
<title>Unicode Character Classes</title>

<para>The following table, reproduced from the
<link xlink:href="https://www.unicode.org/reports/tr44/#General_Category_Values">Unicode
Character Database</link> for Unicode version 15.0.0, lists all of the
supported character classes.</para>

<table xml:id="charclass">
<title>Unicode 15.0.0 Character Classes</title>
<tgroup cols="2" colsep="1" rowsep="1">
<thead>
<row>
<entry>Class</entry><entry>Description</entry>
</row>
</thead>
<tbody>
<row><entry><code>Lu</code></entry><entry>an uppercase letter</entry></row>
<row><entry><code>Ll</code></entry><entry>a lowercase letter</entry></row>
<row><entry><code>Lt</code></entry><entry>a digraphic character, with first part uppercase</entry></row>
<row><entry><code>LC</code></entry><entry><code>Lu</code> | <code>Ll</code> | <code>Lt</code></entry></row>
<row><entry><code>Lm</code></entry><entry>a modifier letter</entry></row>
<row><entry><code>Lo</code></entry><entry>other letters, including syllables and ideographs</entry></row>
<row><entry><code>L</code></entry><entry><code>Lu</code> | <code>Ll</code> | <code>Lt</code> | <code>Lm</code> | <code>Lo</code></entry></row>
<row><entry><code>Mn</code></entry><entry>a nonspacing combining mark (zero advance width)</entry></row>
<row><entry><code>Mc</code></entry><entry>a spacing combining mark (positive advance width)</entry></row>
<row><entry><code>Me</code></entry><entry>an enclosing combining mark</entry></row>
<row><entry><code>M</code></entry><entry><code>Mn</code> | <code>Mc</code> | <code>Me</code></entry></row>
<row><entry><code>Nd</code></entry><entry>a decimal digit</entry></row>
<row><entry><code>Nl</code></entry><entry>a letterlike numeric character</entry></row>
<row><entry><code>No</code></entry><entry>a numeric character of other type</entry></row>
<row><entry><code>N</code></entry><entry><code>Nd</code> | <code>Nl</code> | <code>No</code></entry></row>
<row><entry><code>Pc</code></entry><entry>a connecting punctuation mark, like a tie</entry></row>
<row><entry><code>Pd</code></entry><entry>a dash or hyphen punctuation mark</entry></row>
<row><entry><code>Ps</code></entry><entry>an opening punctuation mark (of a pair)</entry></row>
<row><entry><code>Pe</code></entry><entry>a closing punctuation mark (of a pair)</entry></row>
<row><entry><code>Pi</code></entry><entry>an initial quotation mark</entry></row>
<row><entry><code>Pf</code></entry><entry>a final quotation mark</entry></row>
<row><entry><code>Po</code></entry><entry>a punctuation mark of other type</entry></row>
<row><entry><code>P</code></entry><entry><code>Pc</code> | <code>Pd</code> | <code>Ps</code> | <code>Pe</code> | <code>Pi</code> | <code>Pf</code> | <code>Po</code></entry></row>
<row><entry><code>Sm</code></entry><entry>a symbol of mathematical use</entry></row>
<row><entry><code>Sc</code></entry><entry>a currency sign</entry></row>
<row><entry><code>Sk</code></entry><entry>a non-letterlike modifier symbol</entry></row>
<row><entry><code>So</code></entry><entry>a symbol of other type</entry></row>
<row><entry><code>S</code></entry><entry><code>Sm</code> | <code>Sc</code> | <code>Sk</code> | <code>So</code></entry></row>
<row><entry><code>Zs</code></entry><entry>a space character (of various non-zero widths)</entry></row>
<row><entry><code>Zl</code></entry><entry>U+2028 LINE SEPARATOR only</entry></row>
<row><entry><code>Zp</code></entry><entry>U+2029 PARAGRAPH SEPARATOR only</entry></row>
<row><entry><code>Z</code></entry><entry><code>Zs</code> | <code>Zl</code> | <code>Zp</code></entry></row>
<row><entry><code>Cc</code></entry><entry>a C0 or C1 control code</entry></row>
<row><entry><code>Cf</code></entry><entry>a format control character</entry></row>
<row><entry><code>Cs</code></entry><entry>a surrogate code point</entry></row>
<row><entry><code>Co</code></entry><entry>a private-use character</entry></row>
<row><entry><code>Cn</code></entry><entry>a reserved unassigned code point or a noncharacter</entry></row>
<row><entry><code>C</code></entry><entry><code>Cc</code> | <code>Cf</code> | <code>Cs</code> | <code>Co</code> | <code>Cn</code></entry></row>
</tbody>
</tgroup>
</table>

<para>They are reproduced here for convenience.</para>

</appendix>

</book>
